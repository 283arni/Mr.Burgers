!function(){class e{constructor(e,t){this.container=document.querySelector(e),this.items=this.container.querySelectorAll("li"),this.addActive(this.items,t)}addActive(e,t){Array.from(e).forEach(o=>{const n=o.querySelector("button"),c=o.querySelector(".close");n.addEventListener("click",()=>{this.clickBtn(e,t,o)}),c&&c.addEventListener("click",()=>{this.removeActive(e,t)})})}clickBtn(e,t,o){const n=o.querySelector(".accordeon__visible");o.classList.contains("active")?this.removeActive(e,t):(this.removeActive(e,t),o.classList.add("active"),n.style.cssText=`${t}: 100%`)}removeActive(e,t){Array.from(e).forEach(e=>{const o=e.querySelector(".accordeon__visible");e.classList.remove("active"),o.style.cssText=`${t}: 0`})}}new e(".accordeon","height"),new e(".accordeon_menu","width")}(),function(){const e=$(".hero__svg");var t=e.offset().left,o=e.offset().top;document.body.clientWidth>768&&$(".hero").mousemove(function(n){var c=n.pageY;!function(n,c){var i=(n-t)/100+"px",r=(c-o)/50+"px";e.css({left:i,top:r})}(n.pageX,c)})}(),ymaps.ready(init);var myPlacemarks=[{coords:59.938433,coords2:30.306681,hint:"Бургеры на Адмиралтейской набережной, 10"},{coords:59.966402,coords2:30.311461,hint:"Бургеры на Каменноостровском проспекте, 37"},{coords:59.946715,coords2:30.434368,hint:"Бургеры на проспекте Энергетиков, 16"}];function init(){var e=new ymaps.Map("map",{center:[59.939095,30.315868],zoom:12,controls:["geolocationControl","zoomControl","searchControl"]});e.behaviors.disable("scrollZoom"),myPlacemarks.forEach(function(t){var o=new ymaps.Placemark([t.coords,t.coords2],{hintContent:t.hint},{iconLayout:"default#image",iconImageHref:"/images/contacts/map-marker.svg",iconImageSize:[46,57]});e.geoObjects.add(o)})}const menu=document.body.querySelector(".nav__little"),html='<div class="humburger__wrapper"></div>',logo=document.body.querySelector(".logo").cloneNode(!0),nav=document.body.querySelector(".nav").cloneNode(!0),cross=document.body.querySelector(".close").cloneNode(!0);function changeMenu(){const e=document.createElement("div");e.classList.add("humburger"),document.body.prepend(e),e.innerHTML=html,copyBlock(e),removeBlock(e)}function copyBlock(e){const t=e.querySelector(".humburger__wrapper");t.append(logo),logo.classList.add("logo_humburger"),t.append(cross),cross.classList.add("close_humburger"),e.append(nav),nav.classList.remove("nav_hero"),nav.classList.add("nav_tablet")}function removeBlock(e){const t=e.querySelector(".nav");var o=e.querySelector(".close_humburger .close__link");$("[data-skroll]").on("click",function(e){e.preventDefault();const t=$(this).attr("data-skroll");$(".section").removeClass("active"),$(".section").eq(t).addClass("active"),$(".nav-sections__circle").removeClass("active").eq(t).addClass("active"),$(".maincontainer").animate({bottom:100*t+"vh"},700)}),$("[data-skroll]").on("click",function(){e.remove()}),o.addEventListener("click",function(){e.remove()}),t.addEventListener("click",function(o){o.target===t&&e.remove()})}menu.addEventListener("click",function(){changeMenu()}),function(){const e=document.querySelector("#modal-popup").innerHTML,t=document.querySelectorAll(".btn_black"),o=document.querySelector(".comments__story");for(i=0;i<t.length;i++)t[i].addEventListener("click",e=>{e.preventDefault();const t=n(o.innerHTML);document.body.appendChild(t)});function n(t){const o=document.createElement("div");o.classList.add("popup"),o.innerHTML=e,o.querySelector(".popup__message").innerHTML=t;const n=o.querySelector(".close__popup .close__link");return n.addEventListener("click",e=>{e.preventDefault(),document.body.removeChild(o)}),o.addEventListener("click",e=>{e.target===o&&n.click()}),o}const c=/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\-]?)?[\d\- ]{7,10}$/,r=/^[а-яА-Я]{2,30}|[a-zA-Z]{2,30}$/,s=/^[А-Яа-я0-9\ \.,!\?\-@]+$/,l=document.querySelector("#form"),a=document.querySelector("#sendBtn");function d(e,t){e.nextElementSibling.style.display="block",e.nextElementSibling.textContent=t}function u(e){e.nextElementSibling.style.display="none"}function m(e){if(r.test(l.name.value))u(l.name);else{const t="Введите адекватное имя. Пример: Степан, Billy, Иоган.";d(l.name,t),e=!1}if(c.test(l.phone.value))u(l.phone);else{const t="Введите верный номер телефона. Пример: +7 123 456 78 90, 1234567890.";d(l.phone,t),e=!1}if(s.test(l.comment.value))u(l.comment);else{const t="Введите комментарий. Не больше 150 символов. Разрешено только кириллица, символы ! , . ? - @.";d(l.comment,t),e=!1}return e}l.addEventListener("keydown",()=>{m(!0)}),l.addEventListener("submit",t=>{if(t.preventDefault(),m(!0),m(!0)){const t=new FormData(l);t.append("to","mail@mail.com");const o=new XMLHttpRequest;o.open("POST","https://webdev-api.loftschool.com/sendmail"),o.send(t),o.addEventListener("load",()=>{const t=function(t){const o=document.createElement("div"),n=document.createElement("input");return o.classList.add("popup"),o.innerHTML=e,o.querySelector(".popup__message").innerHTML=t,o.firstElementChild.firstElementChild.remove(),n.classList.add("btn","btn_modal"),n.type="submit",n.value="Закрыть",o.firstElementChild.appendChild(n),o}(JSON.parse(o.responseText).message);o.status>=400?document.body.appendChild("Что-то сломалось..."):(document.body.appendChild(t),function(e){document.querySelector(".btn_modal").addEventListener("click",t=>{t.preventDefault(),document.body.removeChild(e)})}(t))})}a.disabled=!0,setTimeout(()=>{a.disabled=!1},3e3)})}(),$(document).ready(function(){var e=$(".wrapper"),t=$(".section"),o=$(".maincontainer"),n=!1;const c=new MobileDetect(window.navigator.userAgent).mobile(),i=document.querySelector(".hero");function r(e){o.animate({bottom:100*e+"vh"},700,function(){var t;t=e,$(".nav-sections__circle").removeClass("active").eq(t).addClass("active"),function(e){1==e||6==e||8==e?($(".nav-sections__point").css("background-color","#2f3234"),$(".nav-sections__circle").css("border-color","transparent"),$(".nav-sections__circle.active").css("border-color","#2f3234")):($(".nav-sections__point").css("background-color","#fff"),$(".nav-sections__circle").css("border-color","transparent"),$(".nav-sections__circle.active").css("border-color","#fff"))}(e)})}function s(){const e=document.querySelector(".up");window.innerWidth<480&&(i.classList.contains("active")?e.style.display="none":e.style.display="block")}function l(e,t){let o=$(".nav-sections__circle").filter(".active");40!==e&&"up"!==t||o.next().click(),38!==e&&"down"!==t||o.prev().click()}e.on("wheel",function(e){e.preventDefault();var o,c=t.filter(".active"),i=c.next(),s=c.prev();!1===n&&(n=!0,c.removeClass("active"),e.originalEvent.deltaY>0?(i.length?(o=i.index(),i.addClass("active")):(o=t.first().index(),t.first().addClass("active")),r(o)):(s.length?(o=s.index(),s.addClass("active")):(o=t.last().index(),t.last().addClass("active")),r(o)),setTimeout(()=>{n=!1},1500))}),c&&$(".maincontainer").swipe({swipe:function(e,t){l("",t),s()}}),$("[data-skroll]").on("click",function(e){e.preventDefault();const o=$(this).attr("data-skroll");t.removeClass("active"),$(".section").eq(o).addClass("active"),r(o),s()}),$(document).on("keydown",e=>{switch(e.keyCode){case 40:case 38:e.preventDefault(),l(e.keyCode)}})});const containerVideo=document.querySelector(".video__player"),video=document.querySelector(".video__burger"),player=document.querySelector(".video__controls"),play=document.querySelector(".video__start"),trackDot=document.querySelector(".video__track-dot"),track=document.querySelector(".video__line"),volume=document.querySelector(".video__volume"),volumeTrack=document.querySelector(".video__volume-line"),volumeDot=document.querySelector(".video__volume-dot"),playScreen=document.querySelector(".video__play-screen");function defaultVolume(){const e=video.volume=.2;volumeDot.style.left=Math.floor(e*volumeTrack.clientWidth)+"px"}function playPause(){video.paused?video.play():video.pause(),containerVideo.classList.toggle("pause")}function timeUpdate(){const e=Math.floor(video.currentTime)/Math.floor(video.duration);trackDot.style.left=`${Math.floor(e*track.clientWidth)}px`}function setCurrentTime(e){const t=e.offsetX/track.clientWidth;video.currentTime=t*video.duration}function muted(e){e.currentTarget.classList.toggle("mute"),video.muted=!video.muted}function setVolume(e){volumeDot.style.left=`${e.offsetX}px`,video.volume=e.offsetX/e.currentTarget.clientWidth,0===video.volume?volume.classList.add("mute"):volume.classList.remove("mute")}video.addEventListener("canplaythrough",function(){defaultVolume()}),play.addEventListener("click",function(){playPause()}),playScreen.addEventListener("click",function(){playPause()}),video.addEventListener("timeupdate",function(){timeUpdate()}),track.addEventListener("click",function(e){setCurrentTime(e)}),volume.addEventListener("click",function(e){muted(e)}),volumeTrack.addEventListener("click",function(e){setVolume(e)}),function(){new class{constructor(e){this.container=document.querySelector(e),this.slider=this.container.querySelector(".slider__list"),this.item=this.slider.querySelectorAll(".slider__slid"),this.btnLeft=this.container.querySelector(".slider__btn_prev"),this.btnRight=this.container.querySelector(".slider__btn_next"),this.currentItem=0,this.btnLeft.addEventListener("click",e=>{e.preventDefault(),this.sliderGo("prev")}),this.btnRight.addEventListener("click",e=>{e.preventDefault(),this.sliderGo("next")})}sliderGo(e){"next"===e&&this.currentItem++,"prev"===e&&this.currentItem--,this.currentItem===this.item.length&&(this.currentItem=0),this.currentItem<0&&(this.currentItem=this.item.length-1),this.translate()}translate(){this.slider.style.transform=`translateX(-${this.currentItem}00%)`}}(".slider")}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY29yZGVvbi5qcyIsImRyb3BzLmpzIiwibWFwLmpzIiwibWVudVBob25lLmpzIiwibW9kYWwuanMiLCJvbmVwYWdlc2Nyb2xsLmpzIiwicGxheWVyLmpzIiwic2xpZGVyLmpzIl0sIm5hbWVzIjpbIkFjY29yZGVvbiIsIltvYmplY3QgT2JqZWN0XSIsInNlY3Rpb24iLCJzaXplIiwidGhpcyIsImNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIml0ZW1zIiwicXVlcnlTZWxlY3RvckFsbCIsImFkZEFjdGl2ZSIsIm9iaiIsIkFycmF5IiwiZnJvbSIsImZvckVhY2giLCJpdGVtIiwiYnRuIiwiY2xvc2UiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xpY2tCdG4iLCJyZW1vdmVBY3RpdmUiLCJpbmZvIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJhZGQiLCJzdHlsZSIsImNzc1RleHQiLCJyZW1vdmUiLCJkcm9wcyIsIiQiLCJwb3NYIiwib2Zmc2V0IiwibGVmdCIsInBvc1kiLCJ0b3AiLCJib2R5IiwiY2xpZW50V2lkdGgiLCJtb3VzZW1vdmUiLCJlIiwibW92ZVkiLCJwYWdlWSIsIm1vdmVYIiwiY29yZHNYIiwiY29yZHNZIiwiY3NzIiwibW92ZURyb3BzIiwicGFnZVgiLCJ5bWFwcyIsInJlYWR5IiwiaW5pdCIsIm15UGxhY2VtYXJrcyIsImNvb3JkcyIsImNvb3JkczIiLCJoaW50IiwibXlNYXAiLCJNYXAiLCJjZW50ZXIiLCJ6b29tIiwiY29udHJvbHMiLCJiZWhhdmlvcnMiLCJkaXNhYmxlIiwibXlQbGFjZW1hcmsiLCJQbGFjZW1hcmsiLCJoaW50Q29udGVudCIsImljb25MYXlvdXQiLCJpY29uSW1hZ2VIcmVmIiwiaWNvbkltYWdlU2l6ZSIsImdlb09iamVjdHMiLCJtZW51IiwiaHRtbCIsImxvZ28iLCJjbG9uZU5vZGUiLCJuYXYiLCJjcm9zcyIsImNoYW5nZU1lbnUiLCJibG9jayIsImNyZWF0ZUVsZW1lbnQiLCJwcmVwZW5kIiwiaW5uZXJIVE1MIiwiY29weUJsb2NrIiwicmVtb3ZlQmxvY2siLCJ3cmFwcGVyIiwiYXBwZW5kIiwiZnVsbE1lbnUiLCJjbG9zZU1lbnUiLCJvbiIsInByZXZlbnREZWZhdWx0IiwiaW5kZXhMaW5rIiwiYXR0ciIsInJlbW92ZUNsYXNzIiwiZXEiLCJhZGRDbGFzcyIsImFuaW1hdGUiLCJib3R0b20iLCJ0YXJnZXQiLCJtb2RhbCIsImJ0blJlYWQiLCJjb21tZW50IiwiaSIsImxlbmd0aCIsImNyZWF0ZUJsb2NrIiwiYXBwZW5kQ2hpbGQiLCJ0ZXh0IiwiZGl2IiwiYnRuQ2xvc2UiLCJyZW1vdmVDaGlsZCIsImNsaWNrIiwidmFsaWRUZWwiLCJ2YWxpZE5hbWUiLCJ2YWxpZENvbW1lbnQiLCJpc0Zvcm0iLCJzZW5kQnRuIiwiY3JlYXRlRXJyb3IiLCJuZWlnaGJvciIsIm1lc3NhZ2UiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJkaXNwbGF5IiwidGV4dENvbnRlbnQiLCJyZW1vdmVFcnJvciIsInZhbGlkYXRlRm9ybSIsInZhbGlkIiwidGVzdCIsIm5hbWUiLCJ2YWx1ZSIsImVycm9yZU5hbWUiLCJwaG9uZSIsImVycm9yZVBob25lIiwiZm9ybSIsIkZvcm1EYXRhIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2VuZCIsImRpdkZvcm0iLCJpbnB1dCIsImZpcnN0RWxlbWVudENoaWxkIiwidHlwZSIsImNyZWF0ZU1vZGFsIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0Iiwic3RhdHVzIiwiZWxlbSIsImRlbGV0ZU1vZHVsIiwiZGlzYWJsZWQiLCJzZXRUaW1lb3V0IiwiY29udGFpbmVyU2Nyb2xsIiwic2xpZGVyQ29udGFpbmVyIiwiaW5zY3JvbGwiLCJpc01vYmlsZSIsIk1vYmlsZURldGVjdCIsIndpbmRvdyIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsIm1vYmlsZSIsInNlY3Rpb25IZXJvIiwic2Nyb2xsIiwiaW5kZXhTZWN0aW9uIiwiaW5kZXgiLCJjb2xvckRvdCIsImZ1bGxTY3JlZW4iLCJkaXZVcCIsImlubmVyV2lkdGgiLCJ0b3VjaEFuZEtleSIsImtleUNvZGUiLCJkaXJlY3Rpb24iLCJpbWl0YXRpb25DbGljayIsImZpbHRlciIsIm5leHQiLCJwcmV2Iiwic2VjdGlvbkFjdCIsIm5leHRTZWN0aW9uIiwicHJldlNlY3Rpb24iLCJvcmlnaW5hbEV2ZW50IiwiZGVsdGFZIiwiZmlyc3QiLCJsYXN0Iiwic3dpcGUiLCJldmVudCIsImNvbnRhaW5lclZpZGVvIiwidmlkZW8iLCJwbGF5ZXIiLCJwbGF5IiwidHJhY2tEb3QiLCJ0cmFjayIsInZvbHVtZSIsInZvbHVtZVRyYWNrIiwidm9sdW1lRG90IiwicGxheVNjcmVlbiIsImRlZmF1bHRWb2x1bWUiLCJ2b2wiLCJNYXRoIiwiZmxvb3IiLCJwbGF5UGF1c2UiLCJwYXVzZSIsInRvZ2dsZSIsInRpbWVVcGRhdGUiLCJwcm9ncmVzcyIsImN1cnJlbnRUaW1lIiwiZHVyYXRpb24iLCJzZXRDdXJyZW50VGltZSIsIngiLCJvZmZzZXRYIiwibXV0ZWQiLCJjdXJyZW50VGFyZ2V0Iiwic2V0Vm9sdW1lIiwic2VsZWN0b3IiLCJzbGlkZXIiLCJidG5MZWZ0IiwiYnRuUmlnaHQiLCJjdXJyZW50SXRlbSIsInNsaWRlckdvIiwid2F5IiwidHJhbnNsYXRlIiwidHJhbnNmb3JtIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLE1BQUFBLEVBQ0FDLFlBQUFDLEVBQUFDLEdBQ0FDLEtBQUFDLFVBQUFDLFNBQUFDLGNBQUFMLEdBQ0FFLEtBQUFJLE1BQUFKLEtBQUFDLFVBQUFJLGlCQUFBLE1BQ0FMLEtBQUFNLFVBQUFOLEtBQUFJLE1BQUFMLEdBR0FGLFVBQUFVLEVBQUFSLEdBQ0FTLE1BQUFDLEtBQUFGLEdBQUFHLFFBQUFDLElBQ0EsTUFBQUMsRUFBQUQsRUFBQVIsY0FBQSxVQUNBVSxFQUFBRixFQUFBUixjQUFBLFVBRUFTLEVBQUFFLGlCQUFBLFFBQUEsS0FDQWQsS0FBQWUsU0FBQVIsRUFBQVIsRUFBQVksS0FHQUUsR0FDQUEsRUFB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QWxGLEtBQUErTSxTQUFBLFVBR0EvTSxLQUFBNk0sU0FBQS9MLGlCQUFBLFFBQUFvQixJQUNBQSxFQUFBZ0QsaUJBQ0FsRixLQUFBK00sU0FBQSxVQUlBbE4sU0FBQW1OLEdBQ0EsU0FBQUEsR0FDQWhOLEtBQUE4TSxjQUdBLFNBQUFFLEdBQ0FoTixLQUFBOE0sY0FHQTlNLEtBQUE4TSxjQUFBOU0sS0FBQVcsS0FBQW9GLFNBQ0EvRixLQUFBOE0sWUFBQSxHQUdBOU0sS0FBQThNLFlBQUEsSUFDQTlNLEtBQUE4TSxZQUFBOU0sS0FBQVcsS0FBQW9GLE9BQUEsR0FHQS9GLEtBQUFpTixZQUdBcE4sWUFDQUcsS0FBQTJNLE9BQUF0TCxNQUFBNkwseUJBQUFsTixLQUFBOE0sb0JBSUEsV0FoREEiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xyXG4gIGNsYXNzIEFjY29yZGVvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZWN0aW9uLCBzaXplKSB7XHJcbiAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWN0aW9uKTtcclxuICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJyk7XHJcbiAgICAgIHRoaXMuYWRkQWN0aXZlKHRoaXMuaXRlbXMsIHNpemUpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhZGRBY3RpdmUob2JqLCBzaXplKSB7XHJcbiAgICAgIEFycmF5LmZyb20ob2JqKS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYnRuID0gaXRlbS5xdWVyeVNlbGVjdG9yKCdidXR0b24nKTsgXHJcbiAgICAgICAgY29uc3QgY2xvc2UgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5jbG9zZScpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuY2xpY2tCdG4ob2JqLCBzaXplLCBpdGVtKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKGNsb3NlKXtcclxuICAgICAgICAgIGNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PnsgXHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQWN0aXZlKG9iaiwgc2l6ZSk7IFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjbGlja0J0bihvYmosIHNpemUsIGl0ZW0pIHtcclxuICAgICAgY29uc3QgaW5mbyA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLmFjY29yZGVvbl9fdmlzaWJsZScpO1xyXG5cclxuICAgICAgaWYoIWl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlQWN0aXZlKG9iaiwgc2l6ZSk7XHJcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICBpbmZvLnN0eWxlLmNzc1RleHQgPSBgJHtzaXplfTogMTAwJWA7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVBY3RpdmUob2JqLCBzaXplKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUFjdGl2ZShvYmosIHNpemUpIHtcclxuICAgICAgQXJyYXkuZnJvbShvYmopLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICBjb25zdCBpbmZvID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcuYWNjb3JkZW9uX192aXNpYmxlJyk7XHJcblxyXG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgaW5mby5zdHlsZS5jc3NUZXh0ID0gYCR7c2l6ZX06IDBgO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5ldyBBY2NvcmRlb24oJy5hY2NvcmRlb24nLCAnaGVpZ2h0Jyk7XHJcbiAgbmV3IEFjY29yZGVvbignLmFjY29yZGVvbl9tZW51JywgJ3dpZHRoJyk7XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcbiAgY29uc3QgZHJvcHMgPSAkKCcuaGVyb19fc3ZnJyk7XHJcblxyXG4gIHZhciBwb3NYID0gZHJvcHMub2Zmc2V0KCkubGVmdDtcclxuICB2YXIgcG9zWSA9IGRyb3BzLm9mZnNldCgpLnRvcDtcclxuXHJcbiAgZnVuY3Rpb24gbW92ZURyb3BzKG1vdmVYLCBtb3ZlWSkge1xyXG4gICAgdmFyIGNvcmRzWCA9IChtb3ZlWCAtIHBvc1gpIC8gMTAwICsgJ3B4JztcclxuICAgIHZhciBjb3Jkc1kgPSAobW92ZVkgLSBwb3NZKSAvIDUwICsgJ3B4JztcclxuICAgIGRyb3BzLmNzcyh7XHJcbiAgICAgIGxlZnQ6IGNvcmRzWCxcclxuICAgICAgdG9wOiBjb3Jkc1lcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBpZiAoZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCA+IDc2OCkge1xyXG4gICAgJCgnLmhlcm8nKS5tb3VzZW1vdmUoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgdmFyIG1vdmVZID0gZS5wYWdlWTtcclxuICAgICAgdmFyIG1vdmVYID0gZS5wYWdlWDtcclxuICAgICAgbW92ZURyb3BzKG1vdmVYLCBtb3ZlWSk7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcblxyXG59KSgpOyIsInltYXBzLnJlYWR5KGluaXQpO1xyXG5cclxudmFyIG15UGxhY2VtYXJrcyA9IFt7XHJcbiAgICBjb29yZHM6IDU5LjkzODQzMyxcclxuICAgIGNvb3JkczI6IDMwLjMwNjY4MSxcclxuICAgIGhpbnQ6IFwi0JHRg9GA0LPQtdGA0Ysg0L3QsCDQkNC00LzQuNGA0LDQu9GC0LXQudGB0LrQvtC5INC90LDQsdC10YDQtdC20L3QvtC5LCAxMFwiXHJcbiAgfSxcclxuICB7XHJcbiAgICBjb29yZHM6IDU5Ljk2NjQwMixcclxuICAgIGNvb3JkczI6IDMwLjMxMTQ2MSxcclxuICAgIGhpbnQ6IFwi0JHRg9GA0LPQtdGA0Ysg0L3QsCDQmtCw0LzQtdC90L3QvtC+0YHRgtGA0L7QstGB0LrQvtC8INC/0YDQvtGB0L/QtdC60YLQtSwgMzdcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgY29vcmRzOiA1OS45NDY3MTUsIFxyXG4gICAgY29vcmRzMjogMzAuNDM0MzY4LFxyXG4gICAgaGludDogXCLQkdGD0YDQs9C10YDRiyDQvdCwINC/0YDQvtGB0L/QtdC60YLQtSDQrdC90LXRgNCz0LXRgtC40LrQvtCyLCAxNlwiXHJcbiAgfVxyXG5dXHJcblxyXG5mdW5jdGlvbiBpbml0KCkge1xyXG4gIHZhciBteU1hcCA9IG5ldyB5bWFwcy5NYXAoXCJtYXBcIiwge1xyXG4gICAgY2VudGVyOiBbNTkuOTM5MDk1LCAzMC4zMTU4NjhdLFxyXG4gICAgem9vbTogMTIsXHJcbiAgICBjb250cm9sczogWydnZW9sb2NhdGlvbkNvbnRyb2wnLCd6b29tQ29udHJvbCcsJ3NlYXJjaENvbnRyb2wnXVxyXG4gIH0pO1xyXG4gIG15TWFwLmJlaGF2aW9ycy5kaXNhYmxlKCdzY3JvbGxab29tJyk7IFxyXG4gIG15UGxhY2VtYXJrcy5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcclxuICAgIHZhciBteVBsYWNlbWFyayA9IG5ldyB5bWFwcy5QbGFjZW1hcmsoW29iai5jb29yZHMsIG9iai5jb29yZHMyXSwge1xyXG4gICAgICBoaW50Q29udGVudDogb2JqLmhpbnRcclxuICAgIH0sIHtcclxuICAgICAgaWNvbkxheW91dDogJ2RlZmF1bHQjaW1hZ2UnLFxyXG4gICAgICBpY29uSW1hZ2VIcmVmOiAnL2ltYWdlcy9jb250YWN0cy9tYXAtbWFya2VyLnN2ZycsXHJcbiAgICAgIGljb25JbWFnZVNpemU6IFs0NiwgNTddXHJcbiAgICB9KTtcclxuICAgIG15TWFwLmdlb09iamVjdHNcclxuICAgICAgLmFkZChteVBsYWNlbWFyayk7XHJcbiAgfSlcclxufSIsIlxyXG4gIC8vIG9wZW5lZCBtZW51IGZvciBwaG9uZVxyXG4gIGNvbnN0IG1lbnUgPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoJy5uYXZfX2xpdHRsZScpO1xyXG4gIGNvbnN0IGh0bWwgPSAnPGRpdiBjbGFzcz1cImh1bWJ1cmdlcl9fd3JhcHBlclwiPjwvZGl2Pic7XHJcbiAgY29uc3QgbG9nbyA9IGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcignLmxvZ28nKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgY29uc3QgbmF2ID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCcubmF2JykuY2xvbmVOb2RlKHRydWUpO1xyXG4gIGNvbnN0IGNyb3NzID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCcuY2xvc2UnKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgXHJcblxyXG4gIG1lbnUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjaGFuZ2VNZW51KClcclxuICB9KTtcclxuXHJcbiAgZnVuY3Rpb24gY2hhbmdlTWVudSgpIHtcclxuICAgIGNvbnN0IGJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBibG9jay5jbGFzc0xpc3QuYWRkKCdodW1idXJnZXInKTtcclxuICAgIGRvY3VtZW50LmJvZHkucHJlcGVuZChibG9jayk7XHJcbiAgICBibG9jay5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgY29weUJsb2NrKGJsb2NrKTtcclxuICAgIHJlbW92ZUJsb2NrKGJsb2NrKVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY29weUJsb2NrKGJsb2NrKSB7XHJcbiAgICBjb25zdCB3cmFwcGVyID0gYmxvY2sucXVlcnlTZWxlY3RvcignLmh1bWJ1cmdlcl9fd3JhcHBlcicpO1xyXG4gICAgXHJcbiAgICB3cmFwcGVyLmFwcGVuZChsb2dvKTtcclxuICAgIGxvZ28uY2xhc3NMaXN0LmFkZCgnbG9nb19odW1idXJnZXInKTtcclxuICAgIHdyYXBwZXIuYXBwZW5kKGNyb3NzKTtcclxuICAgIGNyb3NzLmNsYXNzTGlzdC5hZGQoJ2Nsb3NlX2h1bWJ1cmdlcicpO1xyXG4gICAgYmxvY2suYXBwZW5kKG5hdik7XHJcbiAgICBuYXYuY2xhc3NMaXN0LnJlbW92ZSgnbmF2X2hlcm8nKTtcclxuICAgIG5hdi5jbGFzc0xpc3QuYWRkKCduYXZfdGFibGV0Jyk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW1vdmVCbG9jayhibG9jaykge1xyXG4gICAgY29uc3QgZnVsbE1lbnUgPSBibG9jay5xdWVyeVNlbGVjdG9yKCcubmF2Jyk7XHJcbiAgICB2YXIgY2xvc2VNZW51ID0gYmxvY2sucXVlcnlTZWxlY3RvcignLmNsb3NlX2h1bWJ1cmdlciAuY2xvc2VfX2xpbmsnKTtcclxuXHJcbiAgICAkKCdbZGF0YS1za3JvbGxdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgY29uc3QgaW5kZXhMaW5rID0gJCh0aGlzKS5hdHRyKCdkYXRhLXNrcm9sbCcpO1xyXG5cclxuICAgICAgJCgnLnNlY3Rpb24nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICQoJy5zZWN0aW9uJykuZXEoaW5kZXhMaW5rKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICQoJy5uYXYtc2VjdGlvbnNfX2NpcmNsZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5lcShpbmRleExpbmspLmFkZENsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAkKCcubWFpbmNvbnRhaW5lcicpLmFuaW1hdGUoe1xyXG4gICAgICAgICdib3R0b20nOiBpbmRleExpbmsgKiAxMDAgKyAndmgnXHJcbiAgICAgICAgfSwgNzAwXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCdbZGF0YS1za3JvbGxdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICBibG9jay5yZW1vdmUoKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBjbG9zZU1lbnUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGJsb2NrLnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVsbE1lbnUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBpZihlLnRhcmdldCA9PT0gZnVsbE1lbnUpe1xyXG4gICAgICAgIGJsb2NrLnJlbW92ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4iLCIoZnVuY3Rpb24gKCkge1xyXG4gIC8vIG1vZGFsIHdpbmRvd1xyXG5cclxuICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbC1wb3B1cCcpLmlubmVySFRNTDtcclxuICBjb25zdCBidG5SZWFkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJ0bl9ibGFjaycpO1xyXG4gIGNvbnN0IGNvbW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29tbWVudHNfX3N0b3J5Jyk7XHJcblxyXG4gIGZvciAoaSA9IDA7IGkgPCBidG5SZWFkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBidG5SZWFkW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBjb25zdCBibG9jayA9IGNyZWF0ZUJsb2NrKGNvbW1lbnQuaW5uZXJIVE1MKTtcclxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChibG9jayk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZUJsb2NrKHRleHQpIHtcclxuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoJ3BvcHVwJyk7XHJcbiAgICBkaXYuaW5uZXJIVE1MID0gbW9kYWw7XHJcblxyXG4gICAgbGV0IHBvcE1lc3MgPSBkaXYucXVlcnlTZWxlY3RvcignLnBvcHVwX19tZXNzYWdlJyk7XHJcbiAgICBwb3BNZXNzLmlubmVySFRNTCA9IHRleHQ7XHJcblxyXG4gICAgY29uc3QgYnRuQ2xvc2UgPSBkaXYucXVlcnlTZWxlY3RvcignLmNsb3NlX19wb3B1cCAuY2xvc2VfX2xpbmsnKTtcclxuICAgIGJ0bkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpdik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoZS50YXJnZXQgPT09IGRpdikge1xyXG4gICAgICAgIGJ0bkNsb3NlLmNsaWNrKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBkaXY7XHJcbiAgfVxyXG5cclxuICAvLyB2YWxpZGF0ZSBmb3JtXHJcblxyXG4gIGNvbnN0IHZhbGlkVGVsID0gL14oKDh8XFwrNylbXFwtIF0/KT8oXFwoP1xcZHszfVxcKT9bXFwtXT8pP1tcXGRcXC0gXXs3LDEwfSQvO1xyXG4gIGNvbnN0IHZhbGlkTmFtZSA9IC9eW9CwLdGP0JAt0K9dezIsMzB9fFthLXpBLVpdezIsMzB9JC87XHJcbiAgY29uc3QgdmFsaWRDb21tZW50ID0gL15b0JAt0K/QsC3RjzAtOVxcIFxcLiwhXFw/XFwtQF0rJC87XHJcbiAgY29uc3QgaXNGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Zvcm0nKTtcclxuICBjb25zdCBzZW5kQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlbmRCdG4nKTtcclxuICB2YXIgdmFsaWQgPSB0cnVlO1xyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVFcnJvcihuZWlnaGJvciwgbWVzc2FnZSkge1xyXG4gICAgbmVpZ2hib3IubmV4dEVsZW1lbnRTaWJsaW5nLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgbmVpZ2hib3IubmV4dEVsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50ID0gbWVzc2FnZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbW92ZUVycm9yKG5laWdoYm9yKSB7XHJcbiAgICBuZWlnaGJvci5uZXh0RWxlbWVudFNpYmxpbmcuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHZhbGlkYXRlRm9ybSh2YWxpZCkge1xyXG4gICAgXHJcbiAgICBpZiAoIXZhbGlkTmFtZS50ZXN0KGlzRm9ybS5uYW1lLnZhbHVlKSkge1xyXG4gICAgICBjb25zdCBlcnJvcmVOYW1lID0gXCLQktCy0LXQtNC40YLQtSDQsNC00LXQutCy0LDRgtC90L7QtSDQuNC80Y8uINCf0YDQuNC80LXRgDog0KHRgtC10L/QsNC9LCBCaWxseSwg0JjQvtCz0LDQvS5cIjtcclxuICAgICAgY3JlYXRlRXJyb3IoaXNGb3JtLm5hbWUsIGVycm9yZU5hbWUpO1xyXG4gICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVtb3ZlRXJyb3IoaXNGb3JtLm5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdmFsaWRUZWwudGVzdChpc0Zvcm0ucGhvbmUudmFsdWUpKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yZVBob25lID0gXCLQktCy0LXQtNC40YLQtSDQstC10YDQvdGL0Lkg0L3QvtC80LXRgCDRgtC10LvQtdGE0L7QvdCwLiDQn9GA0LjQvNC10YA6ICs3IDEyMyA0NTYgNzggOTAsIDEyMzQ1Njc4OTAuXCI7XHJcbiAgICAgIGNyZWF0ZUVycm9yKGlzRm9ybS5waG9uZSwgZXJyb3JlUGhvbmUpO1xyXG4gICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVtb3ZlRXJyb3IoaXNGb3JtLnBob25lKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXZhbGlkQ29tbWVudC50ZXN0KGlzRm9ybS5jb21tZW50LnZhbHVlKSkge1xyXG4gICAgICBjb25zdCBlcnJvcmVQaG9uZSA9IFwi0JLQstC10LTQuNGC0LUg0LrQvtC80LzQtdC90YLQsNGA0LjQuS4g0J3QtSDQsdC+0LvRjNGI0LUgMTUwINGB0LjQvNCy0L7Qu9C+0LIuINCg0LDQt9GA0LXRiNC10L3QviDRgtC+0LvRjNC60L4g0LrQuNGA0LjQu9C70LjRhtCwLCDRgdC40LzQstC+0LvRiyAhICwgLiA/IC0gQC5cIjtcclxuICAgICAgY3JlYXRlRXJyb3IoaXNGb3JtLmNvbW1lbnQsIGVycm9yZVBob25lKTtcclxuICAgICAgdmFsaWQgPSBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlbW92ZUVycm9yKGlzRm9ybS5jb21tZW50KTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YWxpZDtcclxuICB9XHJcblxyXG4gIGlzRm9ybS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKCkgPT4ge3ZhbGlkYXRlRm9ybSh2YWxpZCk7fSk7XHJcblxyXG4gIGlzRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFsaWRhdGVGb3JtKHZhbGlkKTtcclxuXHJcbiAgICBpZiAodmFsaWRhdGVGb3JtKHZhbGlkKSkge1xyXG4gICAgICBjb25zdCBmb3JtID0gbmV3IEZvcm1EYXRhKGlzRm9ybSk7XHJcblxyXG4gICAgICBmb3JtLmFwcGVuZCgndG8nLCAnbWFpbEBtYWlsLmNvbScpO1xyXG4gICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgeGhyLm9wZW4oJ1BPU1QnLCAnaHR0cHM6Ly93ZWJkZXYtYXBpLmxvZnRzY2hvb2wuY29tL3NlbmRtYWlsJyk7XHJcbiAgICAgIHhoci5zZW5kKGZvcm0pO1xyXG4gICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcclxuICAgICAgICBjb25zdCBibG9jayA9IGNyZWF0ZU1vZGFsKEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCkubWVzc2FnZSk7XHJcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPj0gNDAwKSB7XHJcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCfQp9GC0L4t0YLQviDRgdC70L7QvNCw0LvQvtGB0YwuLi4nKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChibG9jayk7XHJcbiAgICAgICAgICBkZWxldGVNb2R1bChibG9jayk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHNlbmRCdG4uZGlzYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgIHNldFRpbWVvdXQoICgpID0+IHtcclxuICAgICAgc2VuZEJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfSwgMzAwMCk7XHJcbiAgfSk7XHJcblxyXG4gIC8vY3JlYXRlIG1vZGFsIGZvciBmb3JtXHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZU1vZGFsKHRleHQpIHtcclxuICAgIGNvbnN0IGRpdkZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuXHJcbiAgICBkaXZGb3JtLmNsYXNzTGlzdC5hZGQoJ3BvcHVwJyk7XHJcbiAgICBkaXZGb3JtLmlubmVySFRNTCA9IG1vZGFsO1xyXG5cclxuICAgIGxldCBwb3BNZXNzID0gZGl2Rm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX21lc3NhZ2UnKTtcclxuXHJcbiAgICBwb3BNZXNzLmlubmVySFRNTCA9IHRleHQ7XHJcbiAgICBkaXZGb3JtLmZpcnN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkLnJlbW92ZSgpO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCgnYnRuJywgJ2J0bl9tb2RhbCcpO1xyXG4gICAgaW5wdXQudHlwZSA9ICdzdWJtaXQnO1xyXG4gICAgaW5wdXQudmFsdWUgPSBcItCX0LDQutGA0YvRgtGMXCI7XHJcbiAgICBkaXZGb3JtLmZpcnN0RWxlbWVudENoaWxkLmFwcGVuZENoaWxkKGlucHV0KTtcclxuICAgIHJldHVybiBkaXZGb3JtO1xyXG4gIH1cclxuXHJcbiAgLy9yZW1vdmUgbW9kdWxcclxuXHJcbiAgZnVuY3Rpb24gZGVsZXRlTW9kdWwoZWxlbSkge1xyXG4gICAgY29uc3QgY2xvc2VCdG5Nb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG5fbW9kYWwnKTtcclxuXHJcbiAgICBjbG9zZUJ0bk1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59KSgpOyIsIlxyXG5cclxuICAvL09uZVBhZ2VTY3JvbGxcclxuXHJcbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHZhciBjb250YWluZXJTY3JvbGwgPSAkKCcud3JhcHBlcicpLFxyXG4gICAgICAgIHNlY3Rpb24gPSAkKCcuc2VjdGlvbicpLFxyXG4gICAgICAgIHNsaWRlckNvbnRhaW5lciA9ICQoJy5tYWluY29udGFpbmVyJyksXHJcbiAgICAgICAgaW5zY3JvbGwgPSBmYWxzZSxcclxuICAgICAgICBtZCA9IG5ldyBNb2JpbGVEZXRlY3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG5cclxuICAgIGNvbnN0IGlzTW9iaWxlID0gbWQubW9iaWxlKCk7XHJcbiAgICBjb25zdCBzZWN0aW9uSGVybyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZXJvJyk7XHJcblxyXG4gICAgY29udGFpbmVyU2Nyb2xsLm9uKCd3aGVlbCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgIHZhciBzZWN0aW9uQWN0ID0gc2VjdGlvbi5maWx0ZXIoJy5hY3RpdmUnKSxcclxuICAgICAgICAgIG5leHRTZWN0aW9uID0gc2VjdGlvbkFjdC5uZXh0KCksXHJcbiAgICAgICAgICBwcmV2U2VjdGlvbiA9IHNlY3Rpb25BY3QucHJldigpLFxyXG4gICAgICAgICAgaW5kZXhTZWN0aW9uO1xyXG5cclxuICAgICAgaWYgKGluc2Nyb2xsID09PSBmYWxzZSkge1xyXG4gICAgICAgIGluc2Nyb2xsID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgc2VjdGlvbkFjdC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGUub3JpZ2luYWxFdmVudC5kZWx0YVkgPiAwKSB7XHJcbiAgICAgICAgICBpZiAobmV4dFNlY3Rpb24ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGluZGV4U2VjdGlvbiA9IG5leHRTZWN0aW9uLmluZGV4KCk7XHJcbiAgICAgICAgICAgIG5leHRTZWN0aW9uLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGluZGV4U2VjdGlvbiA9IHNlY3Rpb24uZmlyc3QoKS5pbmRleCgpO1xyXG4gICAgICAgICAgICBzZWN0aW9uLmZpcnN0KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc2Nyb2xsKGluZGV4U2VjdGlvbik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChwcmV2U2VjdGlvbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgaW5kZXhTZWN0aW9uID0gcHJldlNlY3Rpb24uaW5kZXgoKTtcclxuICAgICAgICAgICAgcHJldlNlY3Rpb24uYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5kZXhTZWN0aW9uID0gc2VjdGlvbi5sYXN0KCkuaW5kZXgoKTtcclxuICAgICAgICAgICAgc2VjdGlvbi5sYXN0KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc2Nyb2xsKGluZGV4U2VjdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgaW5zY3JvbGwgPSBmYWxzZTtcclxuICAgICAgICB9LCAxNTAwKTsgLy8g0JLRgNC10LzRjyDQvdCwINC+0YLQutCw0YIg0YHQvtCx0YvRgtC40Y8gd2hlZWxcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2Nyb2xsKGluZGV4U2VjdGlvbikge1xyXG4gICAgICBzbGlkZXJDb250YWluZXIuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAnYm90dG9tJzogaW5kZXhTZWN0aW9uICogMTAwICsgJ3ZoJ1xyXG4gICAgICAgIH0sIDcwMCxcclxuICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBhY3RpdmVEb3QoaW5kZXhTZWN0aW9uKTtcclxuICAgICAgICAgIGNvbG9yRG90KGluZGV4U2VjdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgZnVuY3Rpb24gZnVsbFNjcmVlbigpIHtcclxuICAgICAgY29uc3QgZGl2VXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXAnKTtcclxuICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgNDgwKSB7XHJcbiAgICAgICAgaWYgKHNlY3Rpb25IZXJvLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcclxuICAgICAgICAgIGRpdlVwLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGRpdlVwLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNvbG9yRG90KGluZGV4U2VjdGlvbikge1xyXG4gICAgICBpZiAoaW5kZXhTZWN0aW9uID09IDEgfHwgaW5kZXhTZWN0aW9uID09IDYgfHwgaW5kZXhTZWN0aW9uID09IDgpIHtcclxuICAgICAgICAkKCcubmF2LXNlY3Rpb25zX19wb2ludCcpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIFwiIzJmMzIzNFwiKTtcclxuICAgICAgICAkKCcubmF2LXNlY3Rpb25zX19jaXJjbGUnKS5jc3MoJ2JvcmRlci1jb2xvcicsIFwidHJhbnNwYXJlbnRcIik7XHJcbiAgICAgICAgJCgnLm5hdi1zZWN0aW9uc19fY2lyY2xlLmFjdGl2ZScpLmNzcygnYm9yZGVyLWNvbG9yJywgXCIjMmYzMjM0XCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJy5uYXYtc2VjdGlvbnNfX3BvaW50JykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgXCIjZmZmXCIpO1xyXG4gICAgICAgICQoJy5uYXYtc2VjdGlvbnNfX2NpcmNsZScpLmNzcygnYm9yZGVyLWNvbG9yJywgXCJ0cmFuc3BhcmVudFwiKTtcclxuICAgICAgICAkKCcubmF2LXNlY3Rpb25zX19jaXJjbGUuYWN0aXZlJykuY3NzKCdib3JkZXItY29sb3InLCBcIiNmZmZcIik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNNb2JpbGUpIHtcclxuICAgICAgJCgnLm1haW5jb250YWluZXInKS5zd2lwZSh7XHJcbiAgICAgICAgc3dpcGU6IGZ1bmN0aW9uIChldmVudCwgZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgICB0b3VjaEFuZEtleSgnJywgZGlyZWN0aW9uKTtcclxuICAgICAgICAgIGZ1bGxTY3JlZW4oKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgICQoJ1tkYXRhLXNrcm9sbF0nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICBjb25zdCBpbmRleExpbmsgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtc2tyb2xsJyk7XHJcblxyXG4gICAgICBzZWN0aW9uLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgJCgnLnNlY3Rpb24nKS5lcShpbmRleExpbmspLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgc2Nyb2xsKGluZGV4TGluayk7XHJcbiAgICAgIGZ1bGxTY3JlZW4oKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAkKGRvY3VtZW50KS5vbigna2V5ZG93bicsIChlKSA9PiB7XHJcbiAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XHJcbiAgICAgICAgY2FzZSA0MDpcclxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIHRvdWNoQW5kS2V5KGUua2V5Q29kZSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDM4OlxyXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgdG91Y2hBbmRLZXkoZS5rZXlDb2RlKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBhY3RpdmVEb3QoaW5kZXgpIHtcclxuICAgICAgJCgnLm5hdi1zZWN0aW9uc19fY2lyY2xlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpLmVxKGluZGV4KS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdG91Y2hBbmRLZXkoa2V5Q29kZSwgZGlyZWN0aW9uKSB7XHJcbiAgICAgIGxldCBpbWl0YXRpb25DbGljayA9ICQoJy5uYXYtc2VjdGlvbnNfX2NpcmNsZScpLmZpbHRlcignLmFjdGl2ZScpO1xyXG5cclxuICAgICAgaWYgKGtleUNvZGUgPT09IDQwIHx8IGRpcmVjdGlvbiA9PT0gJ3VwJykge1xyXG4gICAgICAgIGltaXRhdGlvbkNsaWNrLm5leHQoKS5jbGljaygpO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIGlmIChrZXlDb2RlID09PSAzOCB8fCBkaXJlY3Rpb24gPT09ICdkb3duJykge1xyXG4gICAgICAgIGltaXRhdGlvbkNsaWNrLnByZXYoKS5jbGljaygpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7IiwiY29uc3QgY29udGFpbmVyVmlkZW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW9fX3BsYXllcicpLFxyXG4gIHZpZGVvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpZGVvX19idXJnZXInKSxcclxuICBwbGF5ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW9fX2NvbnRyb2xzJyksXHJcbiAgcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWRlb19fc3RhcnQnKSxcclxuICB0cmFja0RvdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWRlb19fdHJhY2stZG90JyksXHJcbiAgdHJhY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW9fX2xpbmUnKSxcclxuICB2b2x1bWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW9fX3ZvbHVtZScpLFxyXG4gIHZvbHVtZVRyYWNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpZGVvX192b2x1bWUtbGluZScpLFxyXG4gIHZvbHVtZURvdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWRlb19fdm9sdW1lLWRvdCcpLFxyXG4gIHBsYXlTY3JlZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW9fX3BsYXktc2NyZWVuJylcclxuXHJcblxyXG5mdW5jdGlvbiBkZWZhdWx0Vm9sdW1lKCkge1xyXG4gIGNvbnN0IHZvbCA9IHZpZGVvLnZvbHVtZSA9IDAuMjtcclxuICB2b2x1bWVEb3Quc3R5bGUubGVmdCA9IE1hdGguZmxvb3Iodm9sICogdm9sdW1lVHJhY2suY2xpZW50V2lkdGgpICsgJ3B4JztcclxufVxyXG5cclxuZnVuY3Rpb24gcGxheVBhdXNlKCkge1xyXG4gICh2aWRlby5wYXVzZWQpID8gdmlkZW8ucGxheSgpOiB2aWRlby5wYXVzZSgpO1xyXG4gIGNvbnRhaW5lclZpZGVvLmNsYXNzTGlzdC50b2dnbGUoJ3BhdXNlJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRpbWVVcGRhdGUoKSB7XHJcbiAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLmZsb29yKHZpZGVvLmN1cnJlbnRUaW1lKSAvIE1hdGguZmxvb3IodmlkZW8uZHVyYXRpb24pO1xyXG4gIHRyYWNrRG90LnN0eWxlLmxlZnQgPSBgJHtNYXRoLmZsb29yKHByb2dyZXNzICogdHJhY2suY2xpZW50V2lkdGgpfXB4YDtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0Q3VycmVudFRpbWUoZSkge1xyXG4gIGNvbnN0IHggPSBlLm9mZnNldFggLyB0cmFjay5jbGllbnRXaWR0aDtcclxuICB2aWRlby5jdXJyZW50VGltZSA9IHggKiB2aWRlby5kdXJhdGlvbjtcclxufVxyXG5cclxuZnVuY3Rpb24gbXV0ZWQoZSkge1xyXG4gIGUuY3VycmVudFRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdtdXRlJylcclxuICB2aWRlby5tdXRlZCA9ICF2aWRlby5tdXRlZDtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0Vm9sdW1lKGUpIHtcclxuICB2b2x1bWVEb3Quc3R5bGUubGVmdCA9IGAke2Uub2Zmc2V0WH1weGA7XHJcbiAgdmlkZW8udm9sdW1lID0gZS5vZmZzZXRYIC8gZS5jdXJyZW50VGFyZ2V0LmNsaWVudFdpZHRoO1xyXG4gIHZpZGVvLnZvbHVtZSA9PT0gMCA/IHZvbHVtZS5jbGFzc0xpc3QuYWRkKCdtdXRlJyk6dm9sdW1lLmNsYXNzTGlzdC5yZW1vdmUoJ211dGUnKVxyXG59XHJcbnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnBsYXl0aHJvdWdoJywgZnVuY3Rpb24gKCkge1xyXG4gIGRlZmF1bHRWb2x1bWUoKTtcclxufSk7XHJcbnBsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgcGxheVBhdXNlKClcclxufSk7XHJcbnBsYXlTY3JlZW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgcGxheVBhdXNlKClcclxufSk7XHJcbnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3RpbWV1cGRhdGUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgdGltZVVwZGF0ZSgpO1xyXG59KTtcclxudHJhY2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gIHNldEN1cnJlbnRUaW1lKGUpO1xyXG59KTtcclxudm9sdW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICBtdXRlZChlKTtcclxufSk7XHJcbnZvbHVtZVRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICBzZXRWb2x1bWUoZSk7XHJcbn0pO1xyXG5cclxuXHJcbiIsIihmdW5jdGlvbigpe1xyXG5cclxuLy8gc2xpZGVyIGNvbnN0cnVjdG9yXHJcbmNsYXNzIFNsaWRlciB7XHJcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcclxuICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICB0aGlzLnNsaWRlciA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2xpc3QnKTtcclxuICAgIHRoaXMuaXRlbSA9IHRoaXMuc2xpZGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXJfX3NsaWQnKTtcclxuICAgIHRoaXMuYnRuTGVmdCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2J0bl9wcmV2Jyk7XHJcbiAgICB0aGlzLmJ0blJpZ2h0ID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnNsaWRlcl9fYnRuX25leHQnKTtcclxuICAgIHRoaXMuY3VycmVudEl0ZW0gPSAwO1xyXG5cclxuICAgIHRoaXMuYnRuTGVmdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5zbGlkZXJHbygncHJldicpO1xyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLmJ0blJpZ2h0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLnNsaWRlckdvKCduZXh0Jyk7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgc2xpZGVyR28od2F5KSB7XHJcbiAgICBpZih3YXkgPT09ICduZXh0Jykge1xyXG4gICAgICB0aGlzLmN1cnJlbnRJdGVtKys7XHJcbiAgICB9XHJcblxyXG4gICAgaWYod2F5ID09PSAncHJldicpIHtcclxuICAgICAgdGhpcy5jdXJyZW50SXRlbS0tO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHRoaXMuY3VycmVudEl0ZW0gPT09IHRoaXMuaXRlbS5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5jdXJyZW50SXRlbSA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGhpcy5jdXJyZW50SXRlbSA8IDApIHtcclxuICAgICAgdGhpcy5jdXJyZW50SXRlbSA9IHRoaXMuaXRlbS5sZW5ndGgtMTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnRyYW5zbGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgdHJhbnNsYXRlKCkge1xyXG4gICAgdGhpcy5zbGlkZXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoLSR7dGhpcy5jdXJyZW50SXRlbX0wMCUpYDtcclxuICB9XHJcbn1cclxuXHJcbm5ldyBTbGlkZXIoJy5zbGlkZXInKTtcclxuXHJcbi8vc2xpZGVyIChsaXRlIHZlcnNpb24pXHJcblxyXG4vLyBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVyZ2Vyc19fc2xpZGVyJyk7XHJcbi8vIGNvbnN0IGJ0blJpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1cmdlcnNfX3JpZ2h0Jyk7XHJcbi8vIGNvbnN0IGJ0bkxldGYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVyZ2Vyc19fbGVmdCcpXHJcbi8vIGNvbnN0IHNsaWRlckNoaWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1cmdlcnNfX3NsaWRlci1pdGVtJyk7XHJcblxyXG5cclxuLy8gYnRuUmlnaHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlPT57XHJcbi8vICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4vLyAgIHNsaWRlci5hcHBlbmRDaGlsZChzbGlkZXIuZmlyc3RFbGVtZW50Q2hpbGQpXHJcblxyXG4vLyB9KVxyXG5cclxuLy8gYnRuTGV0Zi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGU9PntcclxuLy8gICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbi8vICAgc2xpZGVyLmluc2VydEJlZm9yZShzbGlkZXIubGFzdEVsZW1lbnRDaGlsZCwgc2xpZGVyLmZpcnN0RWxlbWVudENoaWxkKVxyXG4vLyB9KVxyXG5cclxufSkoKTsiXX0=
